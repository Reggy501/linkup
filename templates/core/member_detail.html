{% extends 'core/base.html' %}
{% load django_bootstrap5 %}

{% block title %}{{ member.user.username }} – Profile{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card shadow-lg">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h3 class="mb-0">{{ member.user.username }}</h3>
        <a href="{% url 'dashboard' %}" class="btn btn-light btn-sm">
          Back to Dashboard
        </a>
      </div>

      <div class="card-body">
        <!-- Profile Info -->
        <div class="row">
          <div class="col-md-6">
            <p><strong>Full Name:</strong> <span class="text-muted">{{ member.full_name|default:"—" }}</span></p>
            <p><strong>Email:</strong> <span class="text-muted">{{ member.email|default:"—" }}</span></p>
            <p><strong>Phone:</strong> <span class="text-muted">{{ member.phone|default:"—" }}</span></p>
          </div>
          <div class="col-md-6">
            <p><strong>Bio:</strong></p>
            <p class="text-muted">{{ member.bio|default:"No bio added yet."|linebreaks }}</p>
          </div>
        </div>

        <hr>

        <!-- Consistency Family -->
        <h5 class="mt-3">Consistency Family</h5>
        {% if member.consistency_family.members %}
          <p><strong>Family Members:</strong></p>
          <div class="d-flex flex-wrap gap-2 mb-3">
            {% for m in member.consistency_family.members %}
              <span class="badge bg-secondary fs-6">{{ m }}</span>
            {% endfor %}
          </div>
        {% else %}
          <p class="text-muted">No family members listed.</p>
        {% endif %}

        {% if member.consistency_family.score %}
          <p><strong>Consistency Score:</strong>
            <span class="badge bg-success fs-5">{{ member.consistency_family.score }}%</span>
          </p>
        {% else %}
          <p class="text-muted">No score set.</p>
        {% endif %}
      </div>

      <div class="card-footer text-center">
        <small class="text-muted">
          Member since {{ member.user.date_joined|date:"d M Y" }}
        </small>
      </div>
    </div>
  </div>
</div>
{% endblock %}